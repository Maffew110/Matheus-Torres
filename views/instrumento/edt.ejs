<%- include('../cabecalho.ejs') %>
  <header>
    <h3>Editar Instrumento</h3>
  </header>
  <div class="content">
    <form id="form-instrumento" autocomplete="off" method="post" action="/instrumento/edt/<%= instrumento._id %>"
      enctype="multipart/form-data">
      <div class="grid">
        <div>
          <label for="id">ID</label>
          <input id="id" name="id" type="text" value="<%=instrumento._id%>" readonly required>
        </div>
        <div>
          <label for="foto">Foto do Instrumento</label>
          <input id="foto" name="foto" type="file">
          <% if (instrumento.foto) { %>
            <div style="margin-top: 10px;">
              <p>Foto atual:</p>
              <img src="<%= instrumento.foto %>" alt="Foto do Instrumento"
                style="max-width: 300px; max-height: 200px; border-radius: 8px; margin-top: 8px;" />
            </div>
            <% } %>
        </div>
        <div>
          <label for="nome">Nome do Instrumento</label>
          <input id="nome" name="nome" type="text" placeholder="Ex: Violão Clássico" value="<%=instrumento.nome%>"
            required>
        </div>

        <div>
          <label for="familia">Família</label>
          <select id="familia" name="familia" required>
            <option value="" disabled>Selecione a Família do Instrumento</option>
            <option value="Metais" <%=instrumento.familia==='Metais' ? 'selected' : '' %>>Metais</option>
            <option value="Madeiras" <%=instrumento.familia==='Madeiras' ? 'selected' : '' %>>Madeiras</option>
            <option value="Cordas" <%=instrumento.familia==='Cordas' ? 'selected' : '' %>>Cordas</option>
            <option value="Percussão" <%=instrumento.familia==='Percussão' ? 'selected' : '' %>>Percussão</option>
          </select>
        </div>

        <div>
          <label for="fabricante">Fabricante</label>
          <select id="fabricante" name="fabricante" required>
            <option value="" disabled>Selecione a Fabricante do Instrumento</option>
            <option value="Yamaha" <%=instrumento.fabricante==='Yamaha' ? 'selected' : '' %>>Yamaha</option>
            <option value="Cassio" <%=instrumento.fabricante==='Cassio' ? 'selected' : '' %>>Cassio</option>
            <option value="Adams" <%=instrumento.fabricante==='Adams' ? 'selected' : '' %>>Adams</option>
            <option value="Fender" <%=instrumento.fabricante==='Fender' ? 'selected' : '' %>>Fender</option>
            <option value="Gibson" <%=instrumento.fabricante==='Gibson' ? 'selected' : '' %>>Gibson</option>
            <option value="Tajima" <%=instrumento.fabricante==='Tajima' ? 'selected' : '' %>>Tajima</option>
            <option value="Giannini" <%=instrumento.fabricante==='Giannini' ? 'selected' : '' %>>Giannini</option>
            <option value="Mapex" <%=instrumento.fabricante==='Mapex' ? 'selected' : '' %>>Mapex</option>
          </select>
        </div>

        <div>
          <label for="data_fabricacao">Data de Fabricação</label>
          <input id="data_fabricacao" name="data_fabricacao" type="date"
            value="<%= instrumento.data_fabricacao ? new Date(instrumento.data_fabricacao).toISOString().slice(0,10) : '' %>"
            required>
        </div>

        <div>
          <label for="preco">Preço (R$)</label>
          <input id="preco" name="preco" type="number" placeholder="0,00" min="0" step="0.01"
            value="<%= instrumento.preco != null ? instrumento.preco : '' %>" required>
        </div>

        <footer>
          <a type="button" class="btn ghost" id="btn-cancelar" href="/instrumento/lst">Cancelar</a>
          <button type="submit" class="btn primary">Salvar</button>
        </footer>
    </form>
  </div>

  <%-include('../rodape.ejs')%>